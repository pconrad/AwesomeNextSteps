<!doctype html>
<html>

<!-- Authors: Phill Conrad, Evan Crook, Kevin Malta-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>The Beginning of the Next Steps of Project Awesome</title>
    <script src="../js/bits.js"></script>
    <script src="../js/random.js"></script>
    <script src="../js/questions.js"></script>    
    <script src="../js/questions/orderOfOperations.js"></script>
    <script src="../js/questions/changeOfBase.js"></script>
    <script src="../js/questions/operandsAndOperators.js"></script>
    <script src="../js/questions/pythonProgramOutput.js"></script>
    <script src="../js/questions/pythonStringSlice.js"></script>
    <script src="../js/questions/symbolicLogic.js"></script>
    <script src="../js/questions/CvariableType.js"></script>
    <script src="../js/questions/strings.js"></script>
    <script src="../purl/purl.js"></script>
    <script src="../js/quiz.js"></script>
</head>

<body>

    <header> 
        <h1 id="quizname"></h1>
    </header>

    <div id="seed"></div>
    <div id="questions"></div>
    <div id="answers"></div>
    
    <script>
	
        var url = purl(); //Parse the current URL using the purl library


        var num = url.param("numQuestions");
        var questionType = url.param("questionType");

	// Try pulling out the seed as a hex number

        var seed = parseInt(url.param("seed"),16);

	// In case that seed was bogus, calculuate an alternative backup seed.

	altSeed = function (min, max) {
	    return Math.floor(Math.random() * (max - min + 1)) + min;
	}(0,0xFFFFFFFF);

	// Use the alternative if the seed passed in was not a legit number

	seed = isNaN(seed) ? altSeed : seed;   

	// generate the quiz using the seed

        var quiz = new Quiz(seed,num,questionType);

	// Fill in the parts of the document TODO: Refactor using JQuery instead of long form JavaScript calls

        document.getElementById("questions").innerHTML += quiz.formatQuestionsHTML();
	document.getElementById("seed").innerHTML += "<h2>Quiz #: " + seed.toString(16).toUpperCase() + "</h2> <hr> <br>";
        document.getElementById("quizname").innerHTML = quiz.quizname;

	localStorage.setItem("quiz",JSON.stringify(quiz));

    </script>

    <a href="./answers.html" target="_blank">Answer Key</a>

</body>

</html>
